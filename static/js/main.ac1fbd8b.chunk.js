(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(A,e,t){},102:function(A,e,t){},103:function(A,e,t){},104:function(A,e){A.exports="data:image/gif;base64,R0lGODlhEAAQAOMAAAQCBGySfCw6NIzCpEReVBwiHIS2nKTevAQGBDRGPERiVIy+pKzqxK7wzQAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJAgANACwAAAAAEAAQAAAEPrDJNlRBqKgxJyNAEhhGkAAE4wnF0klLIagNURzvdBQEBbi5yQJQSQRfCUvg2AlcDMyJARGtWq/YrHbLlUQAACH5BAkCABkALAAAAAAQABAAhAQCBGyOfIy+pCQ2LJzWvISylEReTBQiHKTmxHSehIzGpDRGPKTevIS2nExmVBwiHAQGBGySfIzCpCw6NJzavISynERiVKzqxBwmJK7wzQAAAAAAAAAAAAAAAAAAAAAAAAVHYCZmkvFA0GNJ44gYwBI1TbQA1jVewyO0osZjghCZKMAR5WDJCAC/5OgpSTSlrcUV2wpguMACBNxqjMkiL1pEKKzf8LgcGAIAIfkECQIAHgAsAAAAABAAEACEBAIEZI58JDYsjL6kRFpMnNq8FCIchLKULEI8jMakRGJUpObEBAoMbI58LD40HCIchLqcNEo8BAYELDo0jMKkRF5UpN68hLacNEY8jMasTGZUrOrEbJJ8HCYkrvDNAAAABUagJ3pD9QCSoVHjuBBAFEAXhwHVNm7Cw7YeiMGhI00KwJHFoEg6SYDfs4VpTluBzrV1YGxH3a8oK/YgNGIIICEuNMrweCsEACH5BAkCACIALAAAAAAQABAAhQQCBFyGdCw+NIS6nEReTJzWvBQeHHyulBwqJGySfDxORIzGrExmVDRGPKzqxBwmJGSOfCxCNIzCpERiVBwiHAwKDGSKdIy+pEReVJzavBQiHIS2nCQyLGyWfJTKrExmXKzqzCxCPK7wzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZNQJFQdCEYAADNRDJsBgCNzmCQaAAIjqYow9ReNIKsdrw1MMjkAWCBHkfO7SbkEW8eKvXhBp8XWRB9IgIffRsAHnkFZn0cEWJ1EiCBTUEAIfkECQIAIAAsAAAAABAAEACFBAIEZIp0LDo0jL6kRF5UfKqUnNa0FB4cNEo8TGZUbJqEjMashLacrOrEHCokLEI8HCIcTGpcDAoMbJZ8LD40jMKkRGJUfK6UnNq8FCIcPFJETGZcdKKMlMqshLqcrOrMrvDNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkxAkFBYOAAAGUJlyBQaFB7PBAEgNJpY4SAjuGabmEzii/UAFuTmY5weBhzt4UUSF87roDeeEqkzAB1xBgd9bQwHFB9tGgAJXmkcaENBACH5BAkCACAALAAAAAAQABAAhQQCBGSKdCw6NIy+pKTevEReTBQaFJTKrHyulDRGPKzqxExmVBwqJAwKDCxCPIzGpBwiHJzStIS6nKzuzGyWhCw+NIzCpKTmxERiVBQeHJTOrISynDRKRKzqzExqXAwODK7wzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZPQJBwCCIAMoUBcSmcSCgcQOHCrA4gAmp1SchgtkwJ4AFeOhZlYoCRHiIabSHiEwet6wJPfAPQtCMGemkbBg4KWxMIAQIAHhNgBA0MHn5DQQAh+QQJAgAjACwAAAAAEAAQAIUEAgRkhnQsOjSMvqSk3rwcIhxEWkx8qpSUzqxMZlQkLiwUGhRkjnys6swMCgw0RjyMxqQcKiREYlSEspSc0rRMblxkinQsPjSMwqSk5sQcJiREXlR8rpSUzrRMalwkNixsknys7swMDgyu8M0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTcCRcEgEDYhIpARgyCSfGM2n8UwSCptqcgDAaJEXz5fI0IyHE8dZyBGtR4HIO7yeABBnykI85iweTkgdFgcHAQIAFSFPHAoiIgoVeENBACH5BAkCACIALAAAAAAQABAAhQQCBFyGdCw6NIy+pBwmJHyqjEReTKTevJTKrCQyLISylExqXAwSDGSOfGSGdDRGPCQuJHyulKzuzJzStFRuXAwKDCw+NIzCpBwqJHyqlExmVKTmxJTOrCQ2LIS2nExuXBQaFGSKdK7wzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZOQJFwSCwaj57N8dhJKJfEA8EALQ4AlyrxQdUKGxivUFERiyJlcSgsFizECgDHOwF9iBOPMQJ6SIghABYOGQUBAgAff0UICxgMDBAfc0NBACH5BAkCACIALAAAAAAQABAAhQQCBFyCbCw6NIS6nBQeHJzWvHyqjERiVAwSFJTKrGySfCxCNBwqJKzqxISynExqXAQKDGSKdJzStKzuzFRuXFyGdCw+NIzCpBwiHHyulBQaFJTOrDRGPCQyLKzqzIS2nExuXAwKDK7wzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZPQJFwSCwaj8ik0igJLIcXwOUp5ByoIgUG64BgMyFshIG1PIQTpQOQEA0YBWRBcxY1FpqPMaPhNIYeDwACFQYGAQIAIB5GGyAdIQgdIBtEQQAh+QQJAgAnACwAAAAAEAAQAIUEAgRcgmyEupwsPjR8powcIhyc1rRMZlSUyqyEspQMEhRsknwkMixUblw8UkSc0rRkinQ0Rjx8rpSs6sxMalyUzqyEtpwUGhQsOjQEBgRchnSMxqwsQjx8qowcJiRMZlyEspxsloQkNixUcmSs7syUzrQUHhyu8M0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGSsCTcEgsGo/IpHLJbA5LBOfC5LRkqtcmxBNyMAeUDUCgBAEQp4PJgHxcKMIJx5QwSi6cyXBCAWACHQQBIgAUJEYVFAwKCgwjJURBACH5BAkCABoALAAAAAAQABAAhAQCBFyCbCw6NJTKrBQeHExmVHymjKTevAwSDExuXISynCxCPJzStCQyLKzqzAQGBGSOfJTOrBwmJExqXHyulBQaFFRuXIS2nDRGPKzuzK7wzQAAAAAAAAAAAAAAAAAAAAVHoCaOZGmeaKqubOueR8Y6x6Ow1CNBLCQVCxamMABcVArAQDOpMFARwkTkWFQoJkVl4Rg5EgBBwGAICACJbimSaCAQjUSEFAIAIfkECQIAJwAsAAAAABAAEACFBAIEXIJshLqcLD40fKaMHCIcnNa0TGZUlMqshLKUDBIUbJJ8JDIsVG5cPFJEnNK0ZIp0NEY8fK6UrOrMTGpclM6shLacFBoULDo0BAYEXIZ0jMasLEI8fKqMHCYkTGZchLKcbJaEJDYsVHJkrO7MlM60FB4crvDNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkvAk3BILBqPyKRyyRQSSs2TKRTNWKrXpgcSpQyYjhACAFIKAJsT5fJAGkwH4SRykRglJs5kSKJkRAEEHQEYGRR7RSUjDAoKDBRQQ0EAIfkECQIAIwAsAAAAABAAEACFBAIEXIJshLqcLDo0FB4cfKqMnNa8RGJUDBIUlMqshLKUbJJ8LEI0HCokrOrETGpcBAoMZIp0nNK0hLacrO7MVG5cXIZ0jMKkLD40HCIcfK6UFBoUlM6shLKcNEY8JDIsrOrMTG5cDAoMrvDNAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABk/AkXBILBqPyCQxIFEOL4CLU3jwTIWZxXUEUWxFmm0jsn1gtglAR0kZPjbNo6EhHYE8m3BxQsA4hiAhAAMBBQUBAwAPf0UcIR8ICB8hCURBACH5BAkCACMALAAAAAAQABAAhQQCBFyGdIy+pCw6NHyqjBwmJKTevEReTIS2nJTKrCQyLExqXAwSDGSOfISylGSGdDRGPHyulCQuJKzuzJzStFRuXAwKDIzCpCw+NHyqlBwqJKTmxExmVIS6nJTOrCQ2LExuXBQaFGSKdK7wzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZOwJFwSCwONx2jcqMYKI2HguFJvAAEVCIHkyUWGt2hJRIWMjLlkUaUXnDLHgC5DApRyhNIaE5E3IkTCwADAQQZDxgAbEYeIBIMDBogCURBACH5BAkCACMALAAAAAAQABAAhQQCBGSGdCw6NIy+pKTevBwiHERaTHyqlJTOrExmVCQuJBQaFGSOfKzqzAwKDDRGPIzGpBwqJERiVISylJzStExuXGSKdCw+NIzCpKTmxBwmJEReVHyulJTOtExqXCQ2LGySfKzuzAwODK7wzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZOwJFwNAANj8iMASBBOhsfDcbp3BQIVCQEMMgiExcvUsMQHx0c81CUVo8iFvfIE3YjAG21Z0FxNx4LeWIhFQACAQcHFh1eCBURIiIRgiNBACH5BAkCACAALAAAAAAQABAAhQQCBGSKdCw6NIy+pKTevEReTBQaFJTKrHyulDRGPKzqxExmVBwqJAwKDCxCPIzGpBwiHJzStIS6nKzuzGyWhCw+NIzCpKTmxERiVBQeHJTOrISynDRKRKzqzExqXAwODK7wzQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZPQJAQNCgYAIShUngpADgUyWQ5VAggAyq1kElqlQ+A5LtcOMhLRgCtbCDYw88bDlLTQZ7KXQPY3D0GEXQdDgZ+cAoeABUBCB1sBx4MH15LQQAh+QQJAgAgACwAAAAAEAAQAIUEAgRkinQsOjSMvqREXlR8qpSc1rQUHhw0SjxMZlRsmoSMxqyEtpys6sQcKiQsQjwcIhxMalwMCgxslnwsPjSMwqREYlR8rpSc2rwUIhw8UkRMZlx0ooyUyqyEupys6syu8M0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGS0CQEFQhZACAQ2HIbBAAiInHozAwhQ1BZnDtgiwHjPe6AHjG18QDfXUE2EzJBT6U04XuOyhC0XcADHoRB1Z0DQ8HgYYJABp6CxxsQQAh+QQJAgAiACwAAAAAEAAQAIUEAgRchnQsPjSEupxEXkyc1rwUHhx8rpQcKiRsknw8TkSMxqxMZlQ0Rjys6sQcJiRkjnwsQjSMwqREYlQcIhwMCgxkinSMvqREXlSc2rwUIhyEtpwkMixslnyUyqxMZlys6swsQjyu8M0AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGTECRUCSZUAAAA+EyHDowgAZkMOg0AIGmQ2BgNomZ5sQQ/poXAK/5y4is1w/I21w5zL/1exNh0Q8/bn4iHgAbgiJjBYIgERyHDhKHh0EAIfkECQIAHgAsAAAAABAAEACEBAIEZI58JDYsjL6kRFpMnNq8FCIchLKULEI8jMakRGJUpObEBAoMbI58LD40HCIchLqcNEo8BAYELDo0jMKkRF5UpN68hLacNEY8jMasTGZUrOrEbJJ8HCYkrvDNAAAABUSgJ3qU8kiAUQ3juFUAxl0QFwHEMi6Owbakh0Dn0RgKwJFlwqIAIMmoBhGNdgLVJOOQBW67rSt4NB2LMk+zp4FUu9/uEAAh+QQJAgAZACwAAAAAEAAQAIQEAgRsjnyMvqQkNiyc1ryEspREXkwUIhyk5sR0noSMxqQ0Rjyk3ryEtpxMZlQcIhwEBgRsknyMwqQsOjSc2ryEspxEYlSs6sQcJiSu8M0AAAAAAAAAAAAAAAAAAAAAAAAFRmAmZpL1QNBjCeN4GcASNU20AAYyItPBthnBYaLLmCjAEeNgyCgAjWRLAhA4FlKgIYEJZJOQyhcYHre65lGBkG673/C4NAQAO2VKK1E0MURUTUs1T2g4eGI2clhpWFhKUzNYNk5ycjNqbE9UYUxrMFp5TjNSYkpmb2Q1dzRWNE5wU3lzRklYdFU="},259:function(A,e,t){"use strict";t.r(e);var a=t(0),n=t.n(a),s=t(95),o=t.n(s),i=(t(101),t(11)),r=t(12),c=t(14),l=t(13),h=t(1),u=t(15),d=(t(102),t(103),t(45)),m=t.n(d),g=(t(104),t(105),t(241)),w=function(A){function e(A){var t;return Object(i.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).call(this,A))).fadeOut=t.fadeOut.bind(Object(h.a)(t)),t.state={hidden:!0,message:"",interval:setTimeout(t.fadeOut,0),time:t.props.time},t}return Object(u.a)(e,A),Object(r.a)(e,[{key:"componentWillUnmount",value:function(){clearTimeout(this.state.interval),this.state.interval=null}},{key:"componentDidUpdate",value:function(){this.props.time!==this.state.time&&this.props.message&&this.setState({hidden:!1,message:this.props.message,interval:setTimeout(this.fadeOut,this.props.toastDuration),time:this.props.time})}},{key:"fadeOut",value:function(){this.setState({hidden:!0})}},{key:"render",value:function(){return n.a.createElement("div",{className:this.state.hidden?"toast hidden":"toast visible",tabIndex:"100"},this.state.message)}}]),e}(n.a.Component),C=function(A){function e(A){var t;return Object(i.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).call(this,A))).state={message:"",passwordInput:"",nameInput:"",newAccount:!1},t.handleProceedButton=t.handleProceedButton.bind(Object(h.a)(t)),t.handleNameChange=t.handleNameChange.bind(Object(h.a)(t)),t.handlePasswordChange=t.handlePasswordChange.bind(Object(h.a)(t)),t.handleNewAccountChange=t.handleNewAccountChange.bind(Object(h.a)(t)),t.handleEnterkey=t.handleEnterkey.bind(Object(h.a)(t)),t}return Object(u.a)(e,A),Object(r.a)(e,[{key:"handleEnterkey",value:function(A){13===A.keyCode&&this.handleProceedButton()}},{key:"handleProceedButton",value:function(){this.props.handleProceedButton(this.state.nameInput,this.state.passwordInput,this.state.newAccount)}},{key:"handleNameChange",value:function(A){this.setState({nameInput:A.target.value})}},{key:"handlePasswordChange",value:function(A){this.setState({passwordInput:A.target.value})}},{key:"handleNewAccountChange",value:function(A){this.setState({newAccount:A.target.checked})}},{key:"render",value:function(){return n.a.createElement("div",{className:"chat-app container login"},n.a.createElement(w,{message:"This application is still in development"}),n.a.createElement("h1",{className:"login-text"},"Welcome to Chat"),n.a.createElement("p",{className:"login-subtext"},"Login or Create an Account to start chatting.",n.a.createElement("br",null)," Enter your username and password or create new ones, and an account will be created for you."),n.a.createElement("input",{className:"login-field theme-input",placeholder:"Full Name",maxLength:"64",value:this.state.nameInput,onChange:this.handleNameChange}),n.a.createElement("input",{className:"login-field theme-input",type:"password",onKeyUp:this.handleEnterkey,placeholder:"Password",maxLength:"128",value:this.state.passwordInput,onChange:this.handlePasswordChange}),n.a.createElement("br",null),n.a.createElement("button",{className:"theme-btn login-field",onClick:this.handleProceedButton},"Proceed"),n.a.createElement("br",null),n.a.createElement("input",{type:"checkbox",className:"checkbox",id:"new-account",checked:this.state.newAccount,onChange:this.handleNewAccountChange}),n.a.createElement("label",{htmlFor:"new-account"},"\xa0Create a new account"),n.a.createElement("br",null),n.a.createElement("p",{className:"message"},this.props.message),n.a.createElement("small",null,"\xa9 2019 Diyanshu Agrawal. All rights reserved."))}}]),e}(n.a.Component),E=function(A){function e(A){var t;return Object(i.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).call(this,A))).scrollToBottom=function(){t.messagesEnd.scrollIntoView({behavior:"smooth",block:"nearest",inline:"start"})},t.state={newMessage:"",chat:A.chat,name:A.name,scrollTop:null},t.handleMessageBoxChange=t.handleMessageBoxChange.bind(Object(h.a)(t)),t.handleMessageBoxKeyPress=t.handleMessageBoxKeyPress.bind(Object(h.a)(t)),t.fetchNewMessages=t.fetchNewMessages.bind(Object(h.a)(t)),t.handleSmiley=t.handleSmiley.bind(Object(h.a)(t)),t}return Object(u.a)(e,A),Object(r.a)(e,[{key:"componentDidMount",value:function(){this.setState({refreshInterval:setInterval(this.fetchNewMessages,2e3)}),this.scrollToBottom()}},{key:"componentWillUnmount",value:function(){clearInterval(this.state.refreshInterval)}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"fetchNewMessages",value:function(){this.state.chat&&this.props.fetchNewMessagesForActiveChat(this.state.name,this.state.chat.messages[0].chatId,this.state.chat.messages[this.state.chat.messages.length-1].date)}},{key:"handleMessageBoxChange",value:function(A){this.setState({newMessage:A.target.value})}},{key:"handleMessageBoxKeyPress",value:function(A){if(13===A.keyCode){var e=this.state.newMessage,t=this.state.chat.messages[0].chatId;this.props.submitMessage(this.state.name,e,t);var a=this.state.chat;this.setState({newMessage:"",chat:a})}}},{key:"handleSmiley",value:function(){var A=this.state.newMessage;A+=" \ud83d\ude42 ",this.setState({newMessage:A}),console.log("Smiley")}},{key:"render",value:function(){var A=this,e=[];if(this.state.chat){var t=!0,a=!1,s=void 0;try{for(var o,i=this.state.chat.messages[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var r=o.value,c="chat-bubble "+(r.from===this.state.name?"received":"sent");e.push(n.a.createElement("div",{className:c,key:r._id},n.a.createElement("div",{className:"chat-bubble-info"},r.from),n.a.createElement("div",{className:"chat-bubble-message"},r.message)))}}catch(l){a=!0,s=l}finally{try{t||null==i.return||i.return()}finally{if(a)throw s}}return n.a.createElement("div",{className:"chatbox "},n.a.createElement("div",{className:"bubble-container"},e,n.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){A.messagesEnd=e}})),n.a.createElement("div",{className:"chat-text-box-container"},n.a.createElement("input",{className:"chat-text-box",placeholder:"Enter your message here",value:this.state.newMessage,onChange:this.handleMessageBoxChange,onKeyUp:this.handleMessageBoxKeyPress,maxLength:256}),n.a.createElement("button",{className:"smiley-button option-button",title:"Send smiling face",onClick:this.handleSmiley},"\ud83d\ude42"),n.a.createElement("div",{className:"clearfix"})))}return n.a.createElement("div",{className:"chatbox "},n.a.createElement("div",{className:"bubble-container"},n.a.createElement("p",{className:"text-center white-text"},"Choose a conversation to show messages."),n.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(e){A.messagesEnd=e}})))}}],[{key:"getDerivedStateFromProps",value:function(A,e){return A.chat&&A.name&&(A.chat===e.chat&&A.name===e.name||(e.name=A.name,e.chat=A.chat)),e}}]),e}(n.a.Component);function p(A){return A.status.focus?n.a.createElement("div",null,n.a.createElement("div",{className:"search-result visible"},n.a.createElement("div",{className:"search-results-list"},A.status.resultElement))):n.a.createElement("div",null)}var y=function(A){function e(A){var t;return Object(i.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).call(this,A))).state={query:"",visible:!1,result:"",id:"search-input",resultElement:n.a.createElement("span",null,"Press enter to search, and only an exact match will appear for privacy.")},t.doSearch=t.doSearch.bind(Object(h.a)(t)),t.handleInputChange=t.handleInputChange.bind(Object(h.a)(t)),t.handleSubmit=t.handleSubmit.bind(Object(h.a)(t)),t.handleFocus=t.handleFocus.bind(Object(h.a)(t)),t.handleBlur=t.handleBlur.bind(Object(h.a)(t)),t}return Object(u.a)(e,A),Object(r.a)(e,[{key:"handleBlur",value:function(){this.setState({focus:!1,query:""})}},{key:"handleFocus",value:function(){this.setState({focus:!0})}},{key:"doSearch",value:function(A){this.props.people}},{key:"handleInputChange",value:function(A){this.setState({query:A.target.value})}},{key:"handleSubmit",value:function(A){var e=this;if(13==A.keyCode){var t=this.state.query;g.post("".concat(this.props.globalSettings.serverRoot,"my-chats/search"),{query:t,people:this.props.people,withCredentials:!0},{withCredentials:!0}).then(function(A){e.props.handleSearchResult(A)}).catch(function(A){console.error("Searching",A)}),this.setState({query:" "})}}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("input",{className:"theme-btn chat-search",placeholder:"Search for people",onChange:this.handleInputChange,onKeyUp:this.handleSubmit,value:this.state.query,onFocus:this.handleFocus,onBlur:this.handleBlur}),n.a.createElement(p,{status:this.state}))}}]),e}(n.a.Component),v=function(A){function e(A){var t;return Object(i.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).call(this,A))).activate=t.activate.bind(Object(h.a)(t)),t}return Object(u.a)(e,A),Object(r.a)(e,[{key:"activate",value:function(){this.props.onActivate(this.props.name)}},{key:"render",value:function(){return n.a.createElement("li",{className:this.props.active?"active":"",onClick:this.activate},this.props.name)}}]),e}(n.a.Component),f=function(A){function e(A){var t;return Object(i.a)(this,e),(t=Object(c.a)(this,Object(l.a)(e).call(this,A))).activate=t.activate.bind(Object(h.a)(t)),t.state={chatInterval:null,notDownloaded:!0,toast:null,toastTime:Math.random(),toastDuration:5e3,active:null,activeChatIndex:-1,globalSettings:{name:null,id:null,email:null,accessKey:null,loggedIn:null,serverRoot:"https://chat-app-hereisdx.herokuapp.com/"},chats:[]},t.handleProceedButton=t.handleProceedButton.bind(Object(h.a)(t)),t.fecthNewMessagesForParticularChat=t.fecthNewMessagesForParticularChat.bind(Object(h.a)(t)),t.submitMessage=t.submitMessage.bind(Object(h.a)(t)),t.handleNewChat=t.handleNewChat.bind(Object(h.a)(t)),t.refreshChatLists=t.refreshChatLists.bind(Object(h.a)(t)),t}return Object(u.a)(e,A),Object(r.a)(e,[{key:"componentDidMount",value:function(){this.setState({chatInterval:setInterval(this.refreshChatLists,6e3)})}},{key:"refreshChatLists",value:function(){var A=this;if(this.state.globalSettings.name){var e=[];if(this.state.chats){var t=!0,a=!1,n=void 0;try{for(var s,o=this.state.chats[Symbol.iterator]();!(t=(s=o.next()).done);t=!0){var i=s.value;e.push(i.name)}}catch(r){a=!0,n=r}finally{try{t||null==o.return||o.return()}finally{if(a)throw n}}}g.post("".concat(this.state.globalSettings.serverRoot,"my-chats/refresh-chats"),{people:e,withCredentials:!0},{withCredentials:!0}).then(function(e){var t=e.data;if(t.error)console.error("Refresh chats error ->",t.error),A.setState({toast:"Error while refreshing chat lists",toastTime:Date.now(),toastDuration:5e3});else if(console.log(t),!t.empty&&t){var a=A.state.chats;console.log("New conversation loaded"),a=a.concat(t),A.setState({chats:a,toast:"New conversation loaded",toastTime:Date.now(),toastDuration:5e3})}})}}},{key:"handleProceedButton",value:function(A,e,t){var a=this;this.setState({loginFormMessage:n.a.createElement("span",null,n.a.createElement("img",{src:m.a,className:"loading",alt:"..."}),n.a.createElement("span",null,"Please wait, attempting to log you in...  "))}),g.post(this.state.globalSettings.serverRoot+"login",{name:A,password:e,newAccount:t,withCredentials:!0},{withCredentials:!0}).then(function(A){if(A.data.error)return a.setState({loginFormMessage:A.data.error}),void console.error("Login attempt response error : ",A.data);var e=a.state.globalSettings;e.name=A.data.name,e.loggedIn=!0,a.setState({globalSettings:e,newAccount:A.data.newAccount}),g.get("".concat(a.state.globalSettings.serverRoot,"my-chats"),{withCredentials:!0},{withCredentials:!0}).then(function(A){if(A.data.error)return a.setState({toast:"An error occurred while trying to load your chats\n, please try again.",toastTime:Date.now(),toastDuration:5e3}),void console.error("Login",A.data.error);var e=a.state;e.chats=A.data,e.notDownloaded=!1,a.setState(e)}).catch(function(A){alert("An error occured while fetching your chats, please reload the app"),console.error("Fetching chats",A)})}).catch(function(A){console.error("OOPS",A),a.setState({toast:A,toastTime:Date.now(),toastDuration:5e3})})}},{key:"activate",value:function(A){this.setState({active:A});var e=-1;this.state.chats.find(function(t,a){if(t.name===A)return e=a,a}),this.setState({activeChatIndex:e})}},{key:"fecthNewMessagesForParticularChat",value:function(A,e,t){var a=this;g.post("".concat(this.state.globalSettings.serverRoot,"my-chats/new-messages"),{withCredentials:!0,date:t,chatId:e},{withCredentials:!0}).then(function(A){if(A.data.length>0){var e=a.state.chats;e[a.state.activeChatIndex].messages=e[a.state.activeChatIndex].messages.concat(A.data),a.setState({chats:e})}}).catch(function(A){a.setState({toast:"Error while fetching new chats.",toastTime:Date.now(),toastDuration:5e3}),console.error("Fetch new messages error - >",A)})}},{key:"submitMessage",value:function(A,e,t){var a=this;this.setState({toast:"Posting message",toastTime:Date.now(),toastDuration:1e3}),g.post("".concat(this.state.globalSettings.serverRoot,"my-chats/submit-message"),{from:this.state.globalSettings.name,message:e,chatId:t,withCredentials:!0},{withCredentials:!0}).then(function(A){}).catch(function(A){console.error("POSTED new message",A),a.setState({toast:"Error posting message ".concat(A),toastTime:Math.random(),toastDuration:5e3})})}},{key:"handleNewChat",value:function(A){if(A.data.error)console.error("New Chat Received error",A.data.error),this.setState({toast:"Failed to create a new conversation",toastTime:Math.random(),toastDuration:5e3});else if(A.data.empty)this.setState({toast:"No matching account",toastTime:Math.random(),toastDuration:5e3});else{var e=this.state.chats;e.unshift(A.data),this.setState({chats:e})}}},{key:"render",value:function(){if(this.state.globalSettings.loggedIn){var A=[],e=!0,t=!1,a=void 0;try{for(var s,o=this.state.chats[Symbol.iterator]();!(e=(s=o.next()).done);e=!0){var i=s.value;A.push(n.a.createElement(v,{name:i.name,onActivate:this.activate,globalSettings:this.state.globalSettings,active:i.name===this.state.active,key:i.name}))}}catch(g){t=!0,a=g}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}this.state.notDownloaded?A=n.a.createElement("p",{className:"no-chats text-center padding-10 color-white"},n.a.createElement("img",{className:"loading",src:m.a,alt:"..."}),"Downloading conversations..."):0===A.length&&(A=n.a.createElement("p",{className:"no-chats text-center padding-10 color-white"},"To begin, search the exact name of a person and start chatting!"));var r=[],c=!0,l=!1,h=void 0;try{for(var u,d=this.state.chats[Symbol.iterator]();!(c=(u=d.next()).done);c=!0)i=u.value,r.push(i.name)}catch(g){l=!0,h=g}finally{try{c||null==d.return||d.return()}finally{if(l)throw h}}return n.a.createElement("div",null,n.a.createElement("div",{className:"chat-app container"},n.a.createElement(w,{message:this.state.toast,time:this.state.toastTime,toastDuration:this.state.toastDuration}),n.a.createElement("div",{className:"row app-row"},n.a.createElement("div",{className:"col-4 chats"},n.a.createElement("div",{className:"chats-inner"},n.a.createElement(y,{globalSettings:this.state.globalSettings,people:r,handleSearchResult:this.handleNewChat}),n.a.createElement("ul",null,A))),n.a.createElement("div",{className:"col-8"},n.a.createElement(E,{name:this.state.active,globalSettings:this.state.globalSettings,chat:this.state.chats[this.state.activeChatIndex],fetchNewMessagesForActiveChat:this.fecthNewMessagesForParticularChat,submitMessage:this.submitMessage})))))}return n.a.createElement("div",null,n.a.createElement("div",{className:"mobile"},n.a.createElement("h1",null,"\ud83d\ude41 \ud83d\udcf1 \ud83d\udeab"),n.a.createElement("p",null,"We are sorry, but we currently dont support mobile devices Please use a desktop.")),n.a.createElement(C,{globalSettings:this.state.globalSettings,handleProceedButton:this.handleProceedButton,message:this.state.loginFormMessage}))}}]),e}(n.a.Component);var B=function(){return n.a.createElement(f,null)},I=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function b(A,e){navigator.serviceWorker.register(A).then(function(A){A.onupdatefound=function(){var t=A.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(A)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(A)))})}}).catch(function(A){console.error("Error during service worker registration:",A)})}o.a.render(n.a.createElement(B,null),document.getElementById("root")),function(A){if("serviceWorker"in navigator){if(new URL("/chatapp",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/chatapp","/service-worker.js");I?(function(A,e){fetch(A).then(function(t){var a=t.headers.get("content-type");404===t.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(A){A.unregister().then(function(){window.location.reload()})}):b(A,e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e,A),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):b(e,A)})}}()},45:function(A,e,t){A.exports=t.p+"static/media/loading.e6ebdebf.gif"},96:function(A,e,t){A.exports=t(259)}},[[96,1,2]]]);
//# sourceMappingURL=main.ac1fbd8b.chunk.js.map